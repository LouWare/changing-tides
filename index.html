<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Farbverbindungs-Spiel für Mobilgeräte</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    margin: 0;
    background-color: #f0f0f0;
  }
  #game-board {
    display: flex;
    justify-content: space-between;
    width: 90vw;
  }
  .color-column {
    display: flex;
    flex-direction: column;
    gap: 2vw;
  }
  .color-block {
    width: 15vw;
    height: 15vw;
    border-radius: 10%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4vw;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  }
  #timer, #highscore {
    margin-top: 5vh;
    font-size: 5vw;
  }
  #start-button {
    margin-top: 5vh;
    padding: 2vh 5vw;
    font-size: 5vw;
    border: none;
    background-color: #007BFF;
    color: white;
    border-radius: 5vw;
    cursor: pointer;
    box-shadow: 0px 4px 6px rgba(0, 123, 255, 0.3);
  }
  #start-button:active {
    box-shadow: 0px 2px 3px rgba(0, 123, 255, 0.3);
  }
</style>
</head>
<body>
<div id="game-board">
  <div id="left-column" class="color-column"></div>
  <div id="right-column" class="color-column"></div>
</div>
<button id="start-button">Start</button>
<div id="timer">Zeit: 60</div>
<div id="highscore">Highscore: 0</div>
<script>
  let selectedBlock = null;
  let pairs = 0;
  let highscore = localStorage.getItem('highscore') || 0;
  let timeLeft = 60;
  let difficulty = 1;
  const timerElement = document.getElementById('timer');
  const highscoreElement = document.getElementById('highscore');
  const leftColumn = document.getElementById('left-column');
  const rightColumn = document.getElementById('right-column');
  let timerInterval;

  highscoreElement.innerText = `Highscore: ${highscore}`;

  function generateRandomColor(baseColor, variation) {
    const base = parseInt(baseColor.slice(1), 16);
    const r = (base >> 16) + Math.floor((Math.random() - 0.5) * variation);
    const g = ((base >> 8) & 0xFF) + Math.floor((Math.random() - 0.5) * variation);
    const b = (base & 0xFF) + Math.floor((Math.random() - 0.5) * variation);
    return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
  }

  function generateColors() {
    const baseColor = '#FFCCCC';
    const variation = Math.floor(100 / difficulty);
    const colors = [];
    for (let i = 0; i < 6; i++) {
      colors.push(generateRandomColor(baseColor, variation));
    }
    return colors;
  }

  function setupGame() {
    const colors = generateColors();
    const shuffledColors = [...colors].sort(() => Math.random() - 0.5);
    leftColumn.innerHTML = '';
    rightColumn.innerHTML = '';
    colors.forEach((color, index) => {
      const leftBlock = document.createElement('div');
      leftBlock.className = 'color-block';
      leftBlock.style.backgroundColor = color;
      leftBlock.dataset.color = index;

      const rightBlock = document.createElement('div');
      rightBlock.className = 'color-block';
      rightBlock.style.backgroundColor = shuffledColors[index];
      rightBlock.dataset.color = colors.indexOf(shuffledColors[index]);

      leftColumn.appendChild(leftBlock);
      rightColumn.appendChild(rightBlock);

      leftBlock.addEventListener('click', handleBlockClick);
      rightBlock.addEventListener('click', handleBlockClick);
    });
  }

  function handleBlockClick(event) {
    const block = event.target;
    if (selectedBlock) {
      if (selectedBlock.dataset.color === block.dataset.color && selectedBlock !== block) {
        selectedBlock.style.border = '2px solid green';
        block.style.border = '2px solid green';
        pairs++;
        if (pairs === 6) {
          clearInterval(timerInterval);
          highscore++;
          localStorage.setItem('highscore', highscore);
          highscoreElement.innerText = `Highscore: ${highscore}`;
          alert('Gewonnen! Highscore: ' + highscore);
          difficulty++;
          resetGame();
        }
      } else {
        selectedBlock.style.border = '';
      }
      selectedBlock = null;
    } else {
      selectedBlock = block;
      block.style.border = '2px solid blue';
    }
  }

  function resetGame() {
    pairs = 0;
    timeLeft = 60;
    timerElement.innerText = `Zeit: ${timeLeft}`;
    setupGame();
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeLeft--;
      timerElement.innerText = `Zeit: ${timeLeft}`;
      if (timeLeft === 0) {
        clearInterval(timerInterval);
        alert('Zeit abgelaufen! Highscore: ' + highscore);
        difficulty = 1;
        resetGame();
      }
    }, 1000);
  }

  document.getElementById('start-button').addEventListener('click', resetGame);

  window.onload = setupGame;
</script>
</body>
</html>
